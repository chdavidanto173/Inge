<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Enlace de Documentos</title>
    </head>
    <body>
     
  </style>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
   
  <link rel="stylesheet" href="\node_modules\bootstrap\dist\css\bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="\node_modules\bootstrap\dist\js\bootstrap.min.js"></script>
  <link href="\node_modules\bootstrap\dist\css\bootstrap-datetimepicker.min.css" rel="stylesheet">
  <script type="text/javascript"src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
    <!--script type="text/javascript"src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script-->
    <script type="text/javascript"src="\node_modules\bootstrap\dist\js\bootstrap-datetimepicker.min.js"></script>
    
    </head>
    <body>
       
	  
	   <div class="page-header"></div><!---Encabezado-->
	   
	   
	     <nav class="navbar navbar-default" style="background-color:#60161E;">
  <div class="container-fluid">
    <!-- REsponsive -->
    <div class="navbar-header" >
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#"><span style="color:#FFFFFF;">SITUN</span></a>
    </div>

    <!-- Menu -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li ><a href="../../../../index.html"style="color:#FFFFFF;">Ingreso Correspondencia</span> </a></li>
        <li><a href="#"style="color:#FFFFFF;">Enlace Documentos</a></li>
        <li><a href="\node_modules\bootstrap\dist\paginas\Busqueda.html"style="color:#FFFFFF;">BÃºsqueda</a></li>
		<li><a href="#"style="color:#FFFFFF;">Reportes</a></li>
		<li><a href="#"style="color:#FFFFFF;">Escanear</a></li>
		<li><a href="#" style="color:#FFFFFF;">Pendientes</a></li>
		<li><a href="#" style="color:#FFFFFF;">Ayuda</a></li>
      </ul>
    
       
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
	  
	   
	   <!---Cuerpo--->
	   <table class ="table">
			<tr>
				<td width = 45%>
					<div class="col-md-1"></div>
					<div class="col-md-8">
						<span  class="text-danger"><h2>Enlace de Documentos</h2></span>
                      
						<form class="form-horizontal">
							<div class="form-group">
								<label class="col-sm-2 control-label  text-danger">Documento 1</label>
								<div class="col-sm-4">
								<input type="text" class = "form-control" id = "Documento1" >
								</div>
								<!--<div class="col-sm-2">
									<input type = "button" class="btn btn-default" id="Buscar1" value = "Buscar" onclick = "validar2()" >
								</div> -->
							</div>
 
							<div class="form-group">
								<label class="col-sm-2 control-label  text-danger">Documento 2</label>
								<div class="col-sm-4">
									<input type="text" class="form-control" id="Documento2"  >
								</div>
								<!--<div class="col-sm-2">
									<input type = "button" class="btn btn-default" id="Buscar2" value = "Buscar" onclick = "validar3()" >
								</div>-->
							</div>
						</form>
          
						<div class="col-sm-2">
							<input type = "button"class="btn btn-default" id ="guardar" value = "Realizar Enlace" onclick = "validar()">
						</div>
						<div class="col-sm-3">
      
						</div>
						<div class="col-sm-2">
							<input type = "button" class="btn btn-default" id="cancelar" value = "Cancelar" onclick = "" >
						</div>
						
						
					</td>
					<td></td>
					<td >
						<table class = "table" id = "busqueda_enlace">
						<thead>
							<tr>
								<td></td>
								<td>Oficio</td>
								<td>Asunto</td>
								<td>Destinatario</td>
								<td>Remitente</td>
							</tr>
						</thead>
						<tbody></tbody>
						</table>
					</td>
			</tr>
        </table>     
 <!-- </div>
           
     <div id="datetimepicker4" class="input-append form-group">	<!-- Calendario---
     <p style="padding-left: 26px;"><label class="col-sm-2 control-label  text-danger style=position:align right">Calendario</label>
					<input data-format="dd-MM-yyyy" type="text" disabled></input>
					<span class="add-on"><i data-time-icon="icon-time" data-date-icon="icon-calendar"></i></span>
					</div>
  </div>  -->

<!--
    <script type="text/javascript"
     src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js">
    </script> 
    <script type="text/javascript"
     src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js">
    </script>
    <script type="text/javascript"
     src="http://tarruda.github.com/bootstrap-datetimepicker/assets/js/bootstrap-datetimepicker.min.js">
    </script>
    <script type="text/javascript"
     src="http://tarruda.github.com/bootstrap-datetimepicker/assets/js/bootstrap-datetimepicker.pt-BR.js">
    </script>
  -->
	   
	   
<script type="text/javascript">

 /* $(function() {
    $('#datetimepicker4').datetimepicker({
	
      pickTime: false
    });
  });
  
   $(function() {
    $('#datetimepicker3').datetimepicker({

      pickTime: false
    });
  });*/
  
    function validar(){

 var D1=document.getElementById("Documento1"); 
 var D2=document.getElementById("Documento2");
 
if(D1.value==false){
  D1.style.borderColor="#FF0000"
  D1.title="Digite los datos del documento a enlazar en el campo de texto";
 }
 else{
  D1.style.borderColor="#06e6ce"
  D1.title="Datos ingresados correctamente";
 }
 
 if(D2.value==false){
  D2.style.borderColor="#FF0000"
  D2.title="Digite los datos del documento a enlazar en el campo de texto";
 }
 else{
  D2.style.borderColor="#06e6ce"
  D2.title="Datos ingresados correctamente";
 }
        
        
 if( D1.value!=false &&  D2.value!=false ){
  return true;
 }

 }
    
	


	
$("#Documento1").keypress(_ => {busqueda('Documento1');});
$("#Documento2").keypress(_ => {busqueda('Documento2');});	
	
	
function validar2(){
        var D1=document.getElementById("Documento1"); 

 
if(D1.value==false){
  D1.style.borderColor="#FF0000"
  D1.title="Digite los datos de busqueda en el campo de texto";
 }
 else{
  D1.style.borderColor="#06e6ce"
  D1.title="Datos ingresados correctamente";
    return true;
 }
}



function validar3(){
        var D2=document.getElementById("Documento2"); 
    if(D2.value==false){
  D2.style.borderColor="#FF0000"
  D2.title="Digite los datos de busqueda en el campo de texto";
 }
 else{
  D2.style.borderColor="#06e6ce"
  D2.title="Datos ingresados correctamente";
 }
}
    
	
	
function busqueda(id)
 {
	let h3 = document.getElementById(id).value;
	 fetch( 'http://localhost:3000/api/TC/BA', {  
    method: 'POST', 
    datatype:'json',
    headers: {  
      "Content-type": "application/x-www-form-urlencoded"  
      } ,
    body: "TC_8="+ h3
      }
	)	 
	.then(res => res.json())
     	//.then(json => JSON.parse(json))
		.then(obj => cargarTabla(obj.data))  //Columna especifica obj.data[0].tp_1 // Nota: para pasar a JSON se usa JSON.stringify(obj.data[0].tp_1)
		.catch(err => console.log('Request failed', err));
	
	//console.log("Solicitada busqueda " + h3);
 }
 
 function cargarTabla(arr)
 {
 $('#busqueda_enlace tbody').empty()
	let tds = '';
	for(let i = 0; i < arr.length; i++){
		tds += '<tr>'
		tds += '<td>' + '+' + '</td>';
		tds += '<td>' + arr[i].tc_3 + '</td>';
		tds += '<td>' + arr[i].tc_8 + '</td>';
		tds += '<td>' + arr[i].tc_5 + '</td>';
		tds += '<td>' + arr[i].tc_7 + '</td>';
		tds += '</tr>';
	}	
	$("#busqueda_enlace").append(tds);
 }	
</script>


    </body>
</html>
